{% include "head.html" %}
{% include "nav.html" %}


<style>
  .single-note {
    background-color: aliceblue;
    padding: 1%;
    margin: 5%;
  }
  .note_head {
    background-color: darkgrey;
    padding: 1%;
    border-radius: 2px;
}
.note_foot {
    background-color: darkgrey;
    padding: 1%;
    border-radius: 2px;
}
.note_body {
  padding: 1%;
  margin: 1%;
}


</style>


<script>

var NoteFunction = function () {
  let windowURL = $(location).attr("href").split("/");
  let finalNewWinURL = windowURL[0] + "//" + windowURL[2] + "/api/note/all";

  var settings = {
    "async": true,
    "crossDomain": true,
    "url": finalNewWinURL,
    "method": "GET",
    "headers": {
      "Content-Type": "application/json",
      "API_KEY": "R4E3_091t1",
      "Accept": "*/*",
      "cache-control": "no-cache"
    },
    "processData": false,
    "data": "",
      error: function (response) {
        // console.log("NEW_ERROR: ", response);
      },
      success: function (response) {
        // console.log("NEW SUCCESS: ", response);
        ConstructNotes(response=response);
      }
  }

  // Finally Send function
  var ajax_request_response_for_retrieve = function () {
    $.ajax(settings).done(function (response) {
      // console.log("NEW FINAL RESPONSE from ajax_request_response_for_retrieve: ", response);
    });
  }

var ConstructNotes = function (response) {
  for (var i = 0; i < response.length; i++) {
    let htmlNote = '<div class="single-note">';
    let note = response[i];
    let keys = Object.keys(note)
      for (let key of keys) {
        htmlNote = htmlNote + '<div class="note_head"><b>Created At: </b>' + note["created_at"] + "</div>";
        htmlNote = htmlNote + '<div class="note_body">' + note["note"] + "</div>";
        htmlNote = htmlNote + '<div class="note_foot"><b>Created By: </b>' + note["created_by"] + "</div>_________________";
      }
    htmlNote = htmlNote + "</div>";
    console.log(htmlNote);
    $("#note").append(htmlNote);
  }
}



// Execute
ajax_request_response_for_retrieve();
}

  // Main Function
  $(document).ready(function () {
    NoteFunction();
  });


</script>


<div id="note">
</div>





{% include "foot.html" %}
